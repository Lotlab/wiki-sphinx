========================
固件烧录工具箱
========================

简介
============

烧录工具箱提供了友好的固件更新界面，整合了USB固件更新工具（WCHIPSTool）和板载调试器线刷工具（PyOCD）。

通过使用此工具箱，你可以一键进入ISP模式下载USB固件，也可以同时烧录蓝牙和USB固件，方便使用。

.. note::
   烧录工具箱的蓝牙烧录功能支持带有板载调试器的设备。请查阅您的产品页面，确定您的设备是否支持板载调试器，以及对应的启用方法。

   烧录工具箱带有的自动进入ISP模式的功能仅适用于固件v1.1.3.2及之后的版本。若您当前的USB固件并不支持此项功能，您则需要手动进入ISP模式。

请访问我们的 `网站下载 <https://dl.lotlab.org/keyboard/flash-toolbox/>`__ 烧录工具箱，此工具箱仅能在 Windows 下使用。

使用说明
=================

启动软件后，请根据您的键盘型号选择烧写的USB芯片的类型。请查阅产品更新手册或产品页面以获取当前产品的芯片类型。

- 对于nRF52系列键盘（如: Lot60-BLE），请选择 nRF52(CH552)。
- 对于CH573系列键盘（如: Lot60-Lite），请选择 CH573

然后选择你要烧录的固件：

- 对于nRF52系列键盘，你可以选择烧录USB固件，或烧录蓝牙固件。没有选择固件则不会烧录对应的固件。
- 对于CH57x系列键盘，你需要在这里选择需要烧录的USB固件。

接着，在设备选择列表中选择你的设备。设备列表中可能有三种类型的设备，其烧录能力各不相同：

- ISP 设备 X: 是ISP模式下的USB设备。此设备可以单独烧录USB固件，或同时烧录USB固件和蓝牙固件；
- Lotlab Configurator: 是普通模式下的键盘设备。此设备可以烧录USB固件、蓝牙固件，或两者同时烧录。在烧录USB固件前，烧录工具箱会尝试自动进入USB的ISP模式以便升级程序。
- CMSIS-DAP: 是板载调试器设备。此设备只能烧录蓝牙固件。

最后，点击烧录按钮即可。

页面选项
====================

- 自动下载：发现USB设备后自动下载USB固件和蓝牙固件（若有）
- 下载时擦除：清空整个芯片并下载程序，会删除所有内部的数据。

.. warning:
   使用“下载时擦除”选项会清空蓝牙芯片的Softdevice、Bootloader、固件和所有设置，请确保你当前刷入的是正确的完整固件，否则将无法再次启动。
   若您已经擦除了已有的程序并且无法启动了，请重新刷入完整的固件包，即可完成救砖。

常见问题
====================

- Q: 无法自动进入ISP模式
- A: 请参考产品页面相关说明，尝试手动进入ISP模式。

- Q: 键盘列表里面没有我的ISP设备
- A: 请检查你的芯片类型选择是否正确，若不正确可能无法识别ISP设备。

更新日志
====================

.. note::
   请务必下载最新版本。老版本的烧录工具箱可能存在一些问题，可能会导致您的设备无法正常工作。

v1.2.1.1
--------------

2021年7月24日发布。

修正CH552/554设备无法找到的问题。

v1.2.1.0
--------------

2021年7月12日发布。

修正CH573的烧录按钮设置不正确的问题。

v1.2.0.0
--------------

2021年7月8日发布。

更新了ISP的DLL，添加了设备切换功能，添加了CH573的支持。

v1.1.3.0
--------------

2021年1月19日发布。

修正了ISP设备选择USB固件导致程序崩溃退出的问题。

v1.1.0.2
--------------

2021年1月9日发布。

添加了CMSIS-DAP设备的选择，解决了键盘无法工作时不能刷机的问题。

v1.1.0.1
--------------

2020年11月1日发布。

修正自动下载时，没有当前设备导致的Exception

v1.0.0.0
--------------

2020年6月7日发布。

初始版本。

